# 开发检查清单

本文档提供了一个详细的检查清单，可用于跟踪开发进度。请根据实际开发情况勾选完成的任务。

---

## 第一阶段：项目架构与基础设施搭建（第 1-2 周）

### 后端项目搭建

- [ ] 安装 Node.js 和 npm
- [ ] 全局安装 NestJS CLI
- [ ] 创建项目 `nest new todo-api`
- [ ] 安装依赖包
- [ ] 配置 TypeScript 编译选项
- [ ] 创建 .env 环境变量文件
- [ ] 项目成功启动在 3000 端口
- [ ] 安装 PostgreSQL 数据库
- [ ] 安装 TypeORM 和 pg 驱动
- [ ] 创建数据库连接配置
- [ ] 创建数据库初始化脚本
- [ ] 成功连接到数据库
- [ ] 创建 `src/common` 目录
- [ ] 创建 `src/config` 目录
- [ ] 创建 `src/utils` 目录
- [ ] 创建 `src/types` 目录
- [ ] 创建全局异常过滤器
- [ ] 创建响应拦截器
- [ ] 创建日志中间件
- [ ] 配置 CORS
- [ ] 设置 ValidationPipe
- [ ] 创建自定义装饰器

### 前端项目搭建

- [ ] 使用 Vite 创建 React 项目
- [ ] 安装项目依赖
- [ ] 配置 TypeScript
- [ ] 配置 ESLint 和 Prettier
- [ ] 项目成功启动在 5173 端口
- [ ] 安装 Ant Design
- [ ] 安装 Ant Design Icons
- [ ] 配置主题定制
- [ ] 创建全局样式文件
- [ ] 安装 Redux Toolkit 和 React-Redux
- [ ] 创建 store 配置文件
- [ ] 创建第一个示例 slice
- [ ] 配置 Redux DevTools
- [ ] 安装 React Router v6
- [ ] 创建路由配置文件
- [ ] 创建基础页面结构（Layout、Not Found）
- [ ] 配置路由守卫（ProtectedRoute）
- [ ] 安装 Axios
- [ ] 创建 Axios 实例和拦截器
- [ ] 创建 API 服务基类
- [ ] 配置错误处理和重试机制
- [ ] 创建 `src/components` 目录
- [ ] 创建 `src/pages` 目录
- [ ] 创建 `src/store` 目录
- [ ] 创建 `src/hooks` 目录
- [ ] 创建 `src/utils` 目录
- [ ] 创建 `src/services` 目录
- [ ] 创建 `src/types` 目录
- [ ] 创建 `src/styles` 目录

### 数据库设计与实现

- [ ] 创建 User 实体
- [ ] 创建 Task 实体
- [ ] 创建 TimeRecord 实体
- [ ] 创建 PomodoroRecord 实体
- [ ] 创建 TaskNote 实体
- [ ] 创建 Attachment 实体
- [ ] 创建 Notification 实体
- [ ] 创建 UserSettings 实体
- [ ] 为 User 实体创建迁移文件
- [ ] 为 Task 实体创建迁移文件
- [ ] 为 TimeRecord 实体创建迁移文件
- [ ] 为 PomodoroRecord 实体创建迁移文件
- [ ] 为 TaskNote 实体创建迁移文件
- [ ] 为 Attachment 实体创建迁移文件
- [ ] 为 Notification 实体创建迁移文件
- [ ] 为 UserSettings 实体创建迁移文件
- [ ] 创建初始表和索引
- [ ] 配置默认值和约束
- [ ] 测试迁移脚本
- [ ] 所有数据库表成功创建
- [ ] 创建 seeder 脚本
- [ ] 初始化测试用户数据
- [ ] 初始化测试任务数据
- [ ] 初始化用户设置

### 认证系统实现

- [ ] 安装 `@nestjs/jwt` 和 `@nestjs/passport`
- [ ] 创建 auth 模块
- [ ] 实现 JwtStrategy
- [ ] 创建 JwtAuthGuard
- [ ] 创建 RefreshToken 机制
- [ ] 配置 token 过期时间和刷新机制
- [ ] JWT token 能正确生成和验证
- [ ] 守卫能正确保护路由
- [ ] 安装 `bcrypt`
- [ ] 创建密码加密和验证服务
- [ ] 配置盐值大小
- [ ] 密码能正确加密
- [ ] 密码验证工作正常
- [ ] 创建 auth slice
- [ ] 实现登录/注册 actions
- [ ] 配置持久化存储（localStorage）
- [ ] 创建认证检查 hook
- [ ] 登录状态能正确保存和恢复
- [ ] token 能正确存储在 localStorage
- [ ] 配置 Axios 请求拦截器添加 token
- [ ] 实现 token 刷新逻辑
- [ ] 处理 token 过期情况
- [ ] 所有 API 请求自动携带 token
- [ ] token 过期时能自动刷新

### 测试环境配置

- [ ] 配置 Jest 配置文件
- [ ] 创建测试数据库配置
- [ ] 创建测试数据库工厂（factory）
- [ ] Jest 能正确运行测试
- [ ] 测试数据库独立于开发数据库
- [ ] 安装 Vitest 和 React Testing Library
- [ ] 配置 Vitest 配置文件
- [ ] 创建测试工具函数
- [ ] 测试框架成功配置
- [ ] 能运行前端单元测试

### 文档编写

- [ ] 编写 API 文档框架（Swagger/OpenAPI）
- [ ] 编写本地开发指南
- [ ] 编写环境配置说明
- [ ] 编写数据库初始化步骤
- [ ] 文档清晰易懂
- [ ] 新开发者能按文档快速搭建环境

### 阶段一验收

- [ ] 后端项目成功启动在 3000 端口 ✅
- [ ] 前端项目成功启动在 5173 端口 ✅
- [ ] 数据库表创建完成 ✅
- [ ] JWT 认证系统工作正常 ✅
- [ ] 能成功登录和获取 token ✅
- [ ] 基础测试框架配置完成 ✅

---

## 第二阶段：用户管理与任务管理核心功能（第 3-5 周）

### 用户管理模块后端开发

#### 用户注册功能
- [ ] 创建 CreateUserDto
- [ ] 实现用户注册 API 端点
- [ ] 添加邮箱验证逻辑
- [ ] 添加用户名重复检查
- [ ] 实现密码加密存储
- [ ] 编写单元测试

#### 用户登录功能
- [ ] 创建 LoginDto
- [ ] 实现登录 API 端点
- [ ] 返回 access token 和 refresh token
- [ ] 实现 "记住登录状态" 功能
- [ ] 编写单元测试

#### 密码重置功能
- [ ] 创建密码重置请求端点
- [ ] 实现邮件发送功能
- [ ] 创建密码重置验证端点
- [ ] 实现 token 过期检查
- [ ] 编写单元测试

#### 用户信息管理
- [ ] 创建获取用户信息 API
- [ ] 创建更新用户信息 API
- [ ] 创建密码修改 API
- [ ] 添加权限检查
- [ ] 编写单元测试

#### 用户设置管理
- [ ] 创建获取用户设置 API
- [ ] 创建更新用户设置 API
- [ ] 配置项完整
- [ ] 编写单元测试

### 任务管理模块后端开发

#### 任务创建功能
- [ ] 创建 CreateTaskDto
- [ ] 实现任务创建 API 端点
- [ ] 验证输入数据
- [ ] 关联用户 ID
- [ ] 编写单元测试

#### 任务列表查询
- [ ] 创建获取任务列表 API
- [ ] 实现分页功能
- [ ] 实现按状态筛选
- [ ] 实现按优先级排序
- [ ] 实现按截止时间排序
- [ ] 实现按创建时间排序
- [ ] 实现搜索功能
- [ ] 编写单元测试

#### 任务详情查询
- [ ] 创建获取任务详情 API
- [ ] 包含关联的笔记和附件信息
- [ ] 权限检查
- [ ] 编写单元测试

#### 任务更新功能
- [ ] 创建 UpdateTaskDto
- [ ] 实现任务更新 API 端点
- [ ] 支持更新所有字段
- [ ] 权限检查
- [ ] 编写单元测试

#### 任务删除功能
- [ ] 实现任务删除 API（软删除）
- [ ] 权限检查
- [ ] 编写单元测试

#### 任务状态管理
- [ ] 实现状态转换 API
- [ ] 记录完成时间
- [ ] 编写单元测试

#### 任务笔记功能
- [ ] 创建添加笔记 API
- [ ] 创建获取笔记列表 API
- [ ] 创建删除笔记 API
- [ ] 编写单元测试

#### 任务附件功能
- [ ] 创建文件上传 API
- [ ] 创建获取附件列表 API
- [ ] 创建删除附件 API
- [ ] 配置文件存储路径
- [ ] 编写单元测试

### 用户管理模块前端开发

#### 登录页面
- [ ] 创建 LoginPage 组件
- [ ] 表单字段完整
- [ ] 实现表单验证
- [ ] 集成登录 API
- [ ] 处理错误提示
- [ ] 实现 "记住密码" 功能
- [ ] 编写单元测试

#### 注册页面
- [ ] 创建 RegisterPage 组件
- [ ] 表单字段完整
- [ ] 实现表单验证
- [ ] 集成注册 API
- [ ] 处理错误提示
- [ ] 注册成功后自动跳转登录
- [ ] 编写单元测试

#### 忘记密码页面
- [ ] 创建 ForgotPasswordPage 组件
- [ ] 实现邮箱输入和验证
- [ ] 集成密码重置 API
- [ ] 处理成功提示
- [ ] 编写单元测试

#### 用户设置页面
- [ ] 创建 UserSettingsPage 组件
- [ ] 个人信息编辑
- [ ] 密码修改表单
- [ ] 主题选择
- [ ] 语言选择
- [ ] 通知设置
- [ ] 工作和休息时长设置
- [ ] 保存和取消按钮
- [ ] 编写单元测试

### 任务管理模块前端开发

#### 任务列表页面
- [ ] 创建 TaskListPage 组件
- [ ] 显示任务列表
- [ ] 实现分页功能
- [ ] 实现筛选功能
- [ ] 实现排序功能
- [ ] 实现搜索功能
- [ ] 显示优先级和截止时间
- [ ] 快速操作按钮
- [ ] 编写单元测试

#### 任务创建/编辑页面
- [ ] 创建 TaskForm 组件
- [ ] 表单字段完整
- [ ] 实现表单验证
- [ ] 集成创建/更新 API
- [ ] 处理错误提示
- [ ] 编写单元测试

#### 任务详情页面
- [ ] 创建 TaskDetailPage 组件
- [ ] 显示任务全部信息
- [ ] 显示任务笔记列表
- [ ] 显示附件列表
- [ ] 添加笔记功能
- [ ] 上传附件功能
- [ ] 编辑和删除功能
- [ ] 显示任务状态转换按钮
- [ ] 编写单元测试

#### 看板视图
- [ ] 创建 KanbanView 组件
- [ ] 按状态显示任务列表
- [ ] 实现拖拽功能
- [ ] 实现卡片快速操作
- [ ] 编写单元测试

### 前端通用组件

#### 布局组件
- [ ] 创建 Header 组件
- [ ] 创建 Sidebar 组件
- [ ] 创建 MainLayout 组件
- [ ] 创建 AuthLayout 组件

#### 通用组件
- [ ] 创建 TaskCard 组件
- [ ] 创建 TaskFilter 组件
- [ ] 创建 PriorityBadge 组件
- [ ] 创建 StatusBadge 组件
- [ ] 创建 ConfirmDialog 组件

### 单元测试编写

#### 后端单元测试
- [ ] 编写用户服务单元测试
- [ ] 编写任务服务单元测试
- [ ] 编写认证服务单元测试
- [ ] 目标覆盖率 > 80%

#### 前端单元测试
- [ ] 编写页面组件测试
- [ ] 编写业务组件测试
- [ ] 目标覆盖率 > 70%

### 文档更新

#### API 文档
- [ ] 使用 Swagger 生成 API 文档
- [ ] 为所有端点添加文档
- [ ] 记录请求/响应示例
- [ ] 记录认证方式

#### 用户手册
- [ ] 编写登录/注册说明
- [ ] 编写任务管理使用说明
- [ ] 编写截图和示例

### 阶段二验收

- [ ] 用户能成功注册和登录 ✅
- [ ] 用户能修改个人信息和设置 ✅
- [ ] 用户能创建、编辑、删除任务 ✅
- [ ] 任务列表筛选排序搜索功能正常 ✅
- [ ] 任务详情页面显示完整 ✅
- [ ] 前端界面美观易用 ✅
- [ ] 单元测试覆盖率 > 70% ✅

---

## 第三阶段：时间管理、统计分析与通知功能（第 6-8 周）

### 时间管理模块后端开发

- [ ] 创建 TimeRecord 实体相关 DTO
- [ ] 实现开始工作 API
- [ ] 实现结束工作 API
- [ ] 实现记录休息时间 API
- [ ] 自动计算工作时长
- [ ] 编写单元测试
- [ ] 创建开始番茄钟 API
- [ ] 实现番茄钟计时逻辑
- [ ] 实现完成番茄钟 API
- [ ] 实现放弃番茄钟 API
- [ ] 记录番茄钟统计信息
- [ ] 编写单元测试
- [ ] 实现获取每日工作时长 API
- [ ] 实现获取每周工作时长 API
- [ ] 实现获取每月工作时长 API
- [ ] 实现获取番茄钟统计 API
- [ ] 编写单元测试

### 数据统计模块后端开发

- [ ] 实现获取总任务数 API
- [ ] 实现获取已完成任务数 API
- [ ] 计算完成率百分比
- [ ] 支持日期范围查询
- [ ] 编写单元测试
- [ ] 实现获取每个分类的任务数 API
- [ ] 实现获取每个分类的完成数 API
- [ ] 编写单元测试
- [ ] 实现获取不同优先级的任务数 API
- [ ] 支持多维度统计
- [ ] 编写单元测试
- [ ] 实现平均任务完成时间计算
- [ ] 实现工作效率指数计算
- [ ] 实现趋势分析
- [ ] 编写单元测试
- [ ] 实现导出为 Excel API
- [ ] 实现导出为 PDF API
- [ ] 支持自定义导出内容
- [ ] 包含图表和统计数据
- [ ] 编写单元测试

### 通知模块后端开发

- [ ] 创建 Notification 实体相关 DTO
- [ ] 实现创建通知 API
- [ ] 实现获取通知列表 API
- [ ] 实现标记通知已读 API
- [ ] 实现删除通知 API
- [ ] 编写单元测试
- [ ] 创建定时任务检查截止时间
- [ ] 实现将要超期提醒逻辑
- [ ] 实现已超期提醒逻辑
- [ ] 生成相应的通知
- [ ] 编写单元测试
- [ ] 实现工作达到一定时长后提醒休息
- [ ] 提醒间隔可根据用户设置调整
- [ ] 生成相应的通知
- [ ] 编写单元测试
- [ ] 实现高优先级任务提醒逻辑
- [ ] 实现任务逾期提醒逻辑
- [ ] 编写单元测试

### 时间管理模块前端开发

- [ ] 创建 TimerPage 组件
- [ ] 显示当前计时信息
- [ ] 实现开始/暂停/停止按钮
- [ ] 显示任务关联信息
- [ ] 集成计时 API
- [ ] 编写单元测试
- [ ] 创建 PomodoroPage 组件
- [ ] 显示番茄钟计时信息
- [ ] 实现工作/休息时长设置
- [ ] 显示完成的番茄钟数
- [ ] 集成番茄钟 API
- [ ] 音频或视觉提醒
- [ ] 编写单元测试
- [ ] 创建 TimeRecordsPage 组件
- [ ] 显示每日工作记录
- [ ] 显示总工作时长
- [ ] 按日期筛选
- [ ] 编写单元测试

### 数据统计模块前端开发

- [ ] 创建 DashboardPage 组件
- [ ] 显示关键指标
- [ ] 显示本周/本月统计
- [ ] 显示工作效率趋势
- [ ] 编写单元测试
- [ ] 安装图表库（如 Recharts）
- [ ] 创建任务完成趋势图
- [ ] 创建工作时间分布图
- [ ] 创建优先级分布图
- [ ] 创建分类统计图
- [ ] 编写单元测试
- [ ] 创建 ReportPage 组件
- [ ] 实现报表预览功能
- [ ] 集成导出为 Excel API
- [ ] 集成导出为 PDF API
- [ ] 实现自定义导出选项
- [ ] 编写单元测试

### 通知模块前端开发

- [ ] 创建 NotificationCenter 组件
- [ ] 显示通知列表
- [ ] 支持标记已读
- [ ] 支持删除通知
- [ ] 支持通知筛选
- [ ] 编写单元测试
- [ ] 创建 Notification Toast 组件
- [ ] 显示实时通知提示
- [ ] 支持不同类型的通知样式
- [ ] 自动消失功能
- [ ] 编写单元测试
- [ ] 创建 NotificationSettings 组件
- [ ] 支持开启/关闭不同类型的通知
- [ ] 支持设置提醒时间
- [ ] 支持设置通知方式
- [ ] 编写单元测试

### 集成测试

- [ ] 测试用户注册到任务创建的完整流程
- [ ] 测试时间记录和统计的完整流程
- [ ] 测试通知生成和显示的完整流程
- [ ] 覆盖主要业务场景
- [ ] 集成测试覆盖主要场景
- [ ] 后端测试通过率 > 95%
- [ ] 测试用户登录到任务创建的完整流程
- [ ] 测试数据显示和更新的完整流程
- [ ] 使用 Cypress 或 Playwright
- [ ] 覆盖主要用户场景
- [ ] 前端E2E测试覆盖主要场景
- [ ] E2E 测试通过率 > 90%

### 文档更新

- [ ] 编写时间管理功能说明
- [ ] 编写统计分析功能说明
- [ ] 编写通知设置说明
- [ ] 包含详细截图和示例

### 阶段三验收

- [ ] 时间记录功能正常工作 ✅
- [ ] 番茄钟功能正常工作 ✅
- [ ] 数据统计准确 ✅
- [ ] 数据可视化美观 ✅
- [ ] 通知提醒准时准确 ✅
- [ ] 报表导出功能正常 ✅
- [ ] 集成测试通过率 > 90% ✅

---

## 第四阶段：系统优化、测试与部署（第 9-10 周）

### 性能优化

#### 后端性能优化
- [ ] 分析慢查询，添加必要索引
- [ ] 实现 Redis 缓存（用户信息、统计数据）
- [ ] 实现数据库查询优化
- [ ] 实现请求速率限制
- [ ] 实现响应压缩（gzip）
- [ ] 配置数据库连接池

#### 前端性能优化
- [ ] 代码分割（懒加载路由）
- [ ] 优化图片加载
- [ ] 缩小 bundle 大小
- [ ] 实现虚拟滚动（大列表）
- [ ] 使用 memo 优化组件重渲染
- [ ] 配置 gzip 压缩

#### 数据库性能优化
- [ ] 添加必要的索引
- [ ] 分析 N+1 查询问题并解决
- [ ] 实现查询结果缓存
- [ ] 配置数据库参数优化
- [ ] 进行性能测试

### 安全加固

#### 认证和授权
- [ ] 实现权限装饰器（@Roles）
- [ ] 实现资源级别权限检查
- [ ] 实现会话管理和超时设置
- [ ] 实现登出时清除 token

#### 数据安全
- [ ] 实现数据加密（敏感数据）
- [ ] 实现 HTTPS 配置
- [ ] 实现数据备份和恢复
- [ ] 实现审计日志

#### API 安全
- [ ] 实现 CSRF 防护
- [ ] 实现 XSS 防护
- [ ] 实现 SQL 注入防护
- [ ] 实现请求验证
- [ ] 实现错误信息脱敏

#### 依赖安全
- [ ] 运行 `npm audit` 检查漏洞
- [ ] 更新有安全问题的依赖
- [ ] 移除未使用的依赖

### 质量保证

#### 单元测试覆盖
- [ ] 后端覆盖率 > 80%
- [ ] 前端覆盖率 > 70%
- [ ] 修复所有测试失败

#### 性能测试
- [ ] 使用 Apache JMeter 或类似工具
- [ ] 模拟 1000+ 并发用户
- [ ] 测试 API 响应时间
- [ ] 测试数据库性能
- [ ] 识别性能瓶颈并优化

#### 安全测试
- [ ] 进行 SQL 注入测试
- [ ] 进行 XSS 测试
- [ ] 进行 CSRF 测试
- [ ] 进行认证绕过测试
- [ ] 进行权限越界测试
- [ ] 进行数据泄露测试

#### 兼容性测试
- [ ] Chrome 兼容性测试
- [ ] Firefox 兼容性测试
- [ ] Safari 兼容性测试
- [ ] Edge 兼容性测试
- [ ] 移动端浏览器测试
- [ ] 响应式设计测试

### 文档编写

#### 技术文档
- [ ] 项目架构文档
- [ ] 数据库设计文档
- [ ] API 接口文档（Swagger）
- [ ] 部署指南
- [ ] 开发指南
- [ ] 测试指南

#### 用户手册
- [ ] 功能使用说明
- [ ] 常见问题解答
- [ ] 故障排查指南
- [ ] 截图和视频教程

#### 运维文档
- [ ] 系统安装指南
- [ ] 配置管理
- [ ] 备份和恢复指南
- [ ] 监控和告警设置
- [ ] 故障处理指南

### 部署准备

#### 环境配置
- [ ] 配置生产数据库
- [ ] 配置生产环境变量
- [ ] 配置 CDN（如适用）
- [ ] 配置域名和 SSL 证书
- [ ] 配置反向代理（Nginx）
- [ ] 配置监控和日志系统

#### 自动化部署
- [ ] 配置 GitHub Actions 或 GitLab CI
- [ ] 自动化测试
- [ ] 自动化构建
- [ ] 自动化部署
- [ ] 配置回滚机制

#### 容器化（可选）
- [ ] 创建 Dockerfile（后端）
- [ ] 创建 Dockerfile（前端）
- [ ] 创建 docker-compose.yml
- [ ] 测试容器构建和运行
- [ ] 配置容器镜像仓库

### 预上线检查

#### 功能验收
- [ ] 验证所有功能正常工作
- [ ] 验证没有严重 bug
- [ ] 验证性能指标达标
- [ ] 验证用户体验良好

#### 部署验收
- [ ] 测试生产环境部署
- [ ] 测试备份和恢复
- [ ] 测试故障转移
- [ ] 测试监控告警
- [ ] 测试日志记录

#### 数据迁移
- [ ] 准备历史数据导入脚本
- [ ] 测试数据迁移过程
- [ ] 准备数据验证脚本
- [ ] 准备数据回滚方案

### 上线和上线后

#### 上线发布
- [ ] 宣传和推广
- [ ] 用户导入
- [ ] 上线前最后检查
- [ ] 正式上线

#### 上线后监控
- [ ] 监控系统运行状况
- [ ] 监控性能指标
- [ ] 监控错误日志
- [ ] 及时响应用户问题

### 阶段四验收

- [ ] 性能测试通过（1000+ 并发） ✅
- [ ] 安全审计通过 ✅
- [ ] 单元测试覆盖率达标 ✅
- [ ] 文档完整 ✅
- [ ] 部署流程完整 ✅
- [ ] 生产环境配置完成 ✅
- [ ] 应用成功上线 ✅

---

## 整体进度统计

| 阶段 | 任务数 | 完成数 | 完成率 |
|------|--------|--------|--------|
| 一   | 145    | 0      | 0%     |
| 二   | 180    | 0      | 0%     |
| 三   | 140    | 0      | 0%     |
| 四   | 125    | 0      | 0%     |
| **总计** | **590** | **0** | **0%** |

---

## 说明

1. **定期更新**：每天或每周更新此清单，标记完成的任务
2. **进度追踪**：通过勾选 `[x]` 来标记完成的任务
3. **风险识别**：如发现某项任务延期，需要分析原因并调整计划
4. **团队沟通**：在每日站会时汇报进度

**最后更新**：2025-10-17
